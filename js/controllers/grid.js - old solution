


    $scope.convertCoordinates = function(Coords){
    	var coords = {x: (parseInt(Coords.split(",")[0]) ), y: (parseInt(Coords.split(",")[1]) )}
       console.log("coords", coords);

       //grid 10,10 = 0,0;
       var i = 0;
        for(i in $scope.grid){
        	var event = $scope.grid[i];
        	if(event.eventCoords.x == coords.x && event.eventCoords.y == coords.y){
        		var found =  i;
        	}
        }
        console.log("found", found);
        $scope.grid[found].selected = true;

        $scope.findDistance(found, coords.x, coords.y);
    }




    // $scope.searchCoordinates = function(){
    // 	$scope.convertCoordinates($scope.coordinates)
    // }


    // old SOLUTION - no longer needed
    $scope.findDistance = function(index, x, y){
      var xAxis = $scope.grid[index].eventCoords.x;
      var yAxis = $scope.grid[index].eventCoords.y;
      
	  
	  // by looping over all the data in the world then this is fatally flawed
	  // it needs to be that you only look at the nearby,
	  // i.e. x - 1, x+2, y-1, y+2, and combinations thereof
    var calculateNear = function(howNear){
           var near = _.reduce($scope.grid, function( ret, event, idx ){
    	    if( event.eventCoords.x == (x-howNear) || event.eventCoords.x == (x+howNear)  || event.eventCoords.x == x ){
    	    	if( event.eventCoords.y == (y-howNear) || event.eventCoords.y == (y+howNear)  || event.eventCoords.y == y ){
    		      if(index != idx){
                    ret[ idx ] = event;
                    $scope.grid[idx].highlighted = true;         
                  }

    		  }
    	    }
    	    return ret;
    	  }, {});
        return near;
    }

    var longnames = calculateNear(1)
     console.log("near elements", longnames);
     
     //$scope.highlightNear(longnames);
    }

    $scope.highlightNear = function(near){
    	forIn(near, function(val, key, o){
		  //console.log("idx of event", key);
		  $scope.grid[key].highlighted = true;
		});

    }

    window.makeSelected = function(arrayIdx){
    	$scope.grid[arrayIdx].selected = "event-selected";
    }
